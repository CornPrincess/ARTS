# Java 流

## 前言

在总结 Java 流相关的技术时，有必要简单回顾一下字符集相关的内容。

### Unicode

#### 简介

> 在Java（其中主要包括在JVM中、内存中、在代码里声明的每一个char、String类型的变量中。）中字符只以一种形式存在，那就是 Unicode，不选择任何特定的编码，直接使用它们在字符集中的编号，这是统一的唯一的方法。
> 在JVM内部，统一使用Unicode表示，当着字符从JVM内部移动到外部时（即保存为文件系统中的一个文件内容时），就进行了编码转换，使用了具体的编码方案。**因此也可以说，所有的编码转换只发生在边界的地方，也就是各种输入/输出流的起作用的地方。**

Unicode 是一种编码方案，其解决的问题是早期 ASCII 等其他编码无法统一全球文字编码的问题。Unicode 把所有的语言都统一到一套编码里，将世界上各种文字的每一个字符指定唯一编码，实现跨语言，跨平台的应用，简单理解 Unicode 就是世界上所有字符的一直符号集。

#### Unicode的问题

由于 Unicode 只是字符和二进制值的映射，它并没有指定每个字符如何转换成字节的表示方法，如汉字“严”对应的 unicode 十六进制数为4E25，转换成二进制需要15位，意味着至少要有2个字节才能表示这个字符以让计算机进行处理。表示其他更大的字符，则需要3个或者4个字节。

此时就带来了两个问题：

- 计算机如何区分 Unicode 编码和 ASCII 编码方式：即计算机如何判断三个字节表示的是一个字符还是三个字符。
- 如果 unicode 统一规定每个字符用三个字节来表示，那么对于英文字母和基本汉字而言，前两个字节都是无用的，这会浪费大量内存。

以上问题造成的结果为：

- 出现了 Unicode 的多种存储方式，即有许多种不同的二进制格式可以用来表示 unicode
- Unicode 在很长一段时间内无法推广，知道互联网的出现

### UTF-8

随着互联网的兴起，推动了统一编码方式的进程。最终UTF-8称为了互联网上使用最广的一种 Unicode 的实现方式，其他的编码方式还有 UTF-16，UTF-32等。

UTF-8最大的特点即，它是一种变长的编码方式，它可以使用1~4字节来表示一个符号。这种方式可以有效地节省内存空间。

UTF-8与Unicode的转化关系：

| **Unicode编码(十六进制)** | **UTF-8 字节流(二进制)**            |
| ------------------------- | ----------------------------------- |
| 000000-00007F             | 0xxxxxxx                            |
| 000080-0007FF             | 110xxxxx 10xxxxxx                   |
| 000800-00FFFF             | 1110xxxx 10xxxxxx 10xxxxxx          |
| 010000-10FFFF             | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx |

## Reference

1.[Java中弄懂Unicode和UTF-8编码方式](https://blog.csdn.net/qq_22771739/article/details/84261165)

