#Tips
文件常用操作：
```java
public class FileIOUtils {

    public static boolean doUnTar(InputStream inputStream, String destPath) {
        TarArchiveEntry tarArchiveEntry;
        try (BufferedInputStream buffInStream = new BufferedInputStream(inputStream);
             TarArchiveInputStream tarInStream = new TarArchiveInputStream(buffInStream)) {
            while ((tarArchiveEntry = tarInStream.getNextTarEntry()) != null) {
                File file = new File(getLegalPath(destPath + File.separator + tarArchiveEntry.getName()));
                if (tarArchiveEntry.isDirectory()) {
                    makeDirs(file);
                } else {
                    copyInputStreamToFile(tarInStream, file);
                }
            }
            return true;
        } catch (IOException e) {
            throw new SwrException(ErrorCodeConst.DISK_FULL_ERROR_OR_WRONG_FILE_FORMAT_CODE, e);
        }
    }

    /**
     * 解压zip包至目标目录下，若目录不存在会自动新建
     */
    public static void unzip(InputStream inputStream, String destDir) {
        ZipEntry zipEntry;
        try (BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);
             ZipInputStream zipInputStream = new ZipInputStream(bufferedInputStream)) {
            while ((zipEntry = zipInputStream.getNextEntry()) != null) {
                File file = new File(destDir, getLegalPath(zipEntry.getName()));
                if (zipEntry.isDirectory()) {
                    makeDirs(file);
                } else {
                    copyInputStreamToFile(zipInputStream, file);
                }
            }
        } catch (IOException e) {
            throw new SwrException(ErrorCodeConst.DISK_FULL_ERROR_OR_WRONG_FILE_FORMAT_CODE, e);
        }
    }

    /**
     * 创建目录若失败则抛异常
     */
    public static void makeDirs(File file) {
        if (file.exists()) {
            return;
        }
        boolean mkdirs = file.mkdirs();
        if (!mkdirs) {
            throw new SwrException(ErrorCodeConst.DISK_FULL_ERROR_OR_WRONG_FILE_FORMAT_CODE, "make directory fail");
        }
    }

    /**
     * 将源目录下的一些文件移入目标目录下,若目标目录不存在则自动创建
     */
    public static void move(String srcDir, Set<String> fileNames, String destDir) {
        File targetDir = new File(destDir);
        if (!targetDir.exists()) {
            makeDirs(targetDir);
        }
        for (String fileName : fileNames) {
            File file = new File(srcDir, fileName);
            if (fileName.contains(Const.SLASH)) {
                makeDirs(new File(destDir + Const.SLASH + StringUtils.substringBeforeLast(fileName, Const.SLASH)));
            }
            if (!file.renameTo(new File(destDir, fileName))) {
                throw new SwrException(ErrorCodeConst.MOVE_FILES_ERROR_CODE, "failed to move files");
            }
        }
    }

    public static void copyInputStreamToFile(InputStream pkgFile, File file) throws IOException {
        try (FileOutputStream outPut = FileUtils.openOutputStream(file)) {
            IOUtils.copy(pkgFile, outPut);
        }
    }

    public static void copyInputStreamToFile(InputStream pkgFile, String filePath) throws IOException {
        File file = new File(filePath);
        copyInputStreamToFile(pkgFile, file);
    }

    public static void createTarGz(String dirPath, String tarGzPath) throws IOException {
        try (FileOutputStream fOut = new FileOutputStream(new File(tarGzPath));
             BufferedOutputStream bOut = new BufferedOutputStream(fOut);
             GzipCompressorOutputStream gzOut = new GzipCompressorOutputStream(bOut);
             TarArchiveOutputStream tOut = new TarArchiveOutputStream(gzOut)) {
            tOut.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);
            // dirPath是一个目录，但会通过递归调用完成这个目录下所有文件的压缩打包
            addFileToTarGz(tOut, dirPath, "");
        }
    }

    private static void addFileToTarGz(TarArchiveOutputStream tOut, String path, String base) throws IOException {
        File file = new File(path);
        String entryName = base + file.getName();
        TarArchiveEntry tarEntry = new TarArchiveEntry(file, entryName);
        tOut.putArchiveEntry(tarEntry);
        if (file.isFile()) {
            try (FileInputStream in = new FileInputStream(file)) {
                IOUtils.copy(in, tOut);
                tOut.closeArchiveEntry();
            }
        } else {
            tOut.closeArchiveEntry();
            File[] children = file.listFiles();
            if (children != null) {
                for (File child : children) {
                    addFileToTarGz(tOut, child.getAbsolutePath(), entryName + "/");
                }
            }
        }
    }

    public static void decompressGz(File input, String outputFolder) throws IOException {
        try (FileInputStream stream = new FileInputStream(input);
             GzipCompressorInputStream in = new GzipCompressorInputStream(stream);
             FileOutputStream out = new FileOutputStream(outputFolder)) {
            IOUtils.copy(in, out);
        }
    }

    public static void decompressLzma(File input, String outputFolder) throws IOException {
        try (FileInputStream stream = new FileInputStream(input);
             LZMACompressorInputStream in = new LZMACompressorInputStream(stream);
             FileOutputStream out = new FileOutputStream(outputFolder) {
             }) {
            IOUtils.copy(in, out);
        }
    }

    public static void rename1stFileInDir(String dirPath, String newFileNamePath) {
        File dirFile = new File(Utility.checkNull(dirPath));
        File[] files = new File[0];
        if (dirFile.isDirectory()) {
            files = dirFile.listFiles();
        }
        if (files != null && files.length != 0) {
            File oldFile = files[0];
            File newFile = new File(newFileNamePath);
            boolean renameResult = oldFile.renameTo(newFile);
            if (!renameResult) {
                throw new SwrException(1, "rename fail");
            }
        }
    }

    public static String getLegalPath(String originalPath) {
        if (originalPath.contains("../") || originalPath.contains("..\\")) {
            originalPath = "";
        }
        return originalPath;
    }

    public static void write(RandomAccessFile file, long offset, long remainingSize, String target) throws IOException {
        file.seek(offset);
        log.debug("mkdirs: " + Utility.checkNull(new File(target).getParentFile()).mkdirs());
        FileOutputStream out = null;
        try {
            out = new FileOutputStream(target);
            int readCount;
            byte[] buff = new byte[1024 * 16];
            while (remainingSize > 0 && (readCount = file.read(buff)) != -1) {
                if (remainingSize >= readCount) {
                    out.write(buff, 0, readCount);
                    remainingSize -= readCount;
                } else {
                    out.write(buff, 0, (int) remainingSize);
                    remainingSize = 0;
                }
            }
        } finally {
            IOUtils.closeQuietly(out);
        }
    }

    public static Set<String> getFileNames(String dirPath) {
        File dir = new File(getLegalPath(dirPath));
        Set<String> fileNameSet = new HashSet<>();
        if (dir.exists() && dir.isDirectory()) {
            String[] fileNames = Utility.checkNull(dir.list());
            fileNameSet.addAll(Arrays.asList(fileNames));
        }
        return fileNameSet;
    }


}
```
